<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>431 Project A - Project A Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">431 Project A</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">Home</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./data.html" aria-current="page">Data</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./proposal.html">Proposal</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./analyses.html">Analyses</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./report.html">Final Report</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-examples--tips" role="button" data-bs-toggle="dropdown" aria-expanded="false">Examples &amp; Tips</a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-examples--tips">    
        <li>
    <a class="dropdown-item" href="./exampleA.html">
 <span class="dropdown-text">Project Proposal Example</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./exampleB.html">
 <span class="dropdown-text">Outline of Analysis Section</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./check_final.html">
 <span class="dropdown-text">Final Report Checklist</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://thomaselove.github.io/431-2022/contact.html">Contact Us</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://thomaselove.github.io/431-2022">431 Homepage</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#what-data-will-i-use" id="toc-what-data-will-i-use" class="nav-link active" data-scroll-target="#what-data-will-i-use">What Data Will I Use?</a></li>
  <li><a href="#developing-the-data-overview" id="toc-developing-the-data-overview" class="nav-link" data-scroll-target="#developing-the-data-overview">Developing the Data: Overview</a></li>
  <li><a href="#data-development-task-list" id="toc-data-development-task-list" class="nav-link" data-scroll-target="#data-development-task-list">Data Development Task List</a>
  <ul class="collapse">
  <li><a href="#task-a.-ingest-the-chr-data-into-a-tibble" id="toc-task-a.-ingest-the-chr-data-into-a-tibble" class="nav-link" data-scroll-target="#task-a.-ingest-the-chr-data-into-a-tibble">Task A. <strong>Ingest the CHR Data into a tibble</strong></a></li>
  <li><a href="#task-b.-identify-a-set-of-4-6-states-containing-200-400-counties." id="toc-task-b.-identify-a-set-of-4-6-states-containing-200-400-counties." class="nav-link" data-scroll-target="#task-b.-identify-a-set-of-4-6-states-containing-200-400-counties.">Task B. <strong>Identify a set of 4-6 states, containing 200-400 counties.</strong></a>
  <ul class="collapse">
  <li><a href="#notes" id="toc-notes" class="nav-link" data-scroll-target="#notes">Notes</a></li>
  </ul></li>
  <li><a href="#task-c.-identify-your-variables" id="toc-task-c.-identify-your-variables" class="nav-link" data-scroll-target="#task-c.-identify-your-variables">Task C. <strong>Identify Your Variables</strong></a>
  <ul class="collapse">
  <li><a href="#the-79-variables-you-must-select-5-from" id="toc-the-79-variables-you-must-select-5-from" class="nav-link" data-scroll-target="#the-79-variables-you-must-select-5-from">The 79 variables you must select 5 from</a></li>
  <li><a href="#some-important-notes" id="toc-some-important-notes" class="nav-link" data-scroll-target="#some-important-notes">Some important notes</a></li>
  </ul></li>
  <li><a href="#cleaning-your-variables" id="toc-cleaning-your-variables" class="nav-link" data-scroll-target="#cleaning-your-variables">Cleaning Your Variables</a>
  <ul class="collapse">
  <li><a href="#the-binary-category" id="toc-the-binary-category" class="nav-link" data-scroll-target="#the-binary-category">The Binary Category</a></li>
  <li><a href="#ratios-that-need-converting" id="toc-ratios-that-need-converting" class="nav-link" data-scroll-target="#ratios-that-need-converting">Ratios That Need Converting</a></li>
  <li><a href="#variables-that-should-be-rescaled" id="toc-variables-that-should-be-rescaled" class="nav-link" data-scroll-target="#variables-that-should-be-rescaled">Variables that should be rescaled</a></li>
  <li><a href="#variables-that-are-proportions-should-be-converted-to-percentages" id="toc-variables-that-are-proportions-should-be-converted-to-percentages" class="nav-link" data-scroll-target="#variables-that-are-proportions-should-be-converted-to-percentages">Variables that are Proportions should be converted to Percentages</a></li>
  <li><a href="#variables-that-should-be-ok-as-is" id="toc-variables-that-should-be-ok-as-is" class="nav-link" data-scroll-target="#variables-that-should-be-ok-as-is">Variables that should be OK as is</a></li>
  </ul></li>
  <li><a href="#task-d.-create-categorical-variables" id="toc-task-d.-create-categorical-variables" class="nav-link" data-scroll-target="#task-d.-create-categorical-variables">Task D. <strong>Create Categorical Variables</strong></a>
  <ul class="collapse">
  <li><a href="#notes-1" id="toc-notes-1" class="nav-link" data-scroll-target="#notes-1">Notes</a></li>
  </ul></li>
  <li><a href="#task-e.-create-your-main-tibble" id="toc-task-e.-create-your-main-tibble" class="nav-link" data-scroll-target="#task-e.-create-your-main-tibble">Task E. <strong>Create your Main Tibble</strong></a>
  <ul class="collapse">
  <li><a href="#notes-2" id="toc-notes-2" class="nav-link" data-scroll-target="#notes-2">Notes</a></li>
  </ul></li>
  <li><a href="#task-f.-provide-a-codebook-for-your-tibble" id="toc-task-f.-provide-a-codebook-for-your-tibble" class="nav-link" data-scroll-target="#task-f.-provide-a-codebook-for-your-tibble">Task F. <strong>Provide a Codebook for Your Tibble</strong></a>
  <ul class="collapse">
  <li><a href="#notes-3" id="toc-notes-3" class="nav-link" data-scroll-target="#notes-3">Notes</a></li>
  </ul></li>
  <li><a href="#task-g.-saving-and-summarizing-your-tibble" id="toc-task-g.-saving-and-summarizing-your-tibble" class="nav-link" data-scroll-target="#task-g.-saving-and-summarizing-your-tibble">Task G. <strong>Saving and Summarizing Your Tibble</strong></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project A Data</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p>This page was last updated: 2022-09-11 21:56:47.</p>
<section id="what-data-will-i-use" class="level1">
<h1>What Data Will I Use?</h1>
<p>The data set for Project A is now available. The data are the 2021 version of the analytic data from County Health Rankings. In much of what follows, we will abbreviate County Health Rankings as <strong>CHR</strong>. You have already seen some versions of these data in Labs 02 and 03, but you’ll need to generate a new data set of your own for Project A.</p>
<p>The data are gathered at <a href="https://www.countyhealthrankings.org/explore-health-rankings/rankings-data-documentation">the County Health Rankings Data &amp; Documentation site</a>.</p>
<p>The key links for you are provided as part of the National Data &amp; Documentation section of that site for the <strong>2021 County Health Rankings</strong>. Do not use data from previous editions of the CHR, and do not use the trends data available on their website for this project.</p>
<p>Specifically, you’ll need three files:</p>
<ul>
<li><a href="https://www.countyhealthrankings.org/sites/default/files/media/document/analytic_data2021.csv">the 2021 CHR CSV Analytic Data</a> (a .csv file)</li>
<li><a href="https://www.countyhealthrankings.org/sites/default/files/media/document/2021%20Analytic%20Documentation.pdf">the 2021 CHR Analytic Data Documentation</a> file (PDF), and</li>
<li><a href="https://www.countyhealthrankings.org/sites/default/files/media/document/DataDictionary_2021.pdf">the 2021 Data Dictionary</a> (PDF)</li>
</ul>
<p>These files are also available in the <a href="https://github.com/THOMASELOVE/431-data/tree/main/projectA">data folder for Project A</a> on Github.</p>
</section>
<section id="developing-the-data-overview" class="level1">
<h1>Developing the Data: Overview</h1>
<p>Cleaning the data will be a time-consuming effort, but the good news is that you can begin it immediately. Before you complete any of the required analyses in R, you’ll need to complete the following steps.</p>
<ol type="1">
<li>Ingest the data into R. You’ll need to remove the top row from the .csv, and you can do that either inside or outside of R.</li>
<li>Select variables (at this stage, there will be 4 required variables, plus 5 additional variables you select, for a total of 9) that you actually need to use and rename them into useful formats instead of the default names provided by CHR. Save the result in your analytic tibble, which should be called <strong>chr_2021</strong>.</li>
<li>Filter your <strong>chr_2021</strong> file so that it contains only the subset of observations (counties) that you actually want to study. Note that each of these counties will have to have a <code>county_ranked</code> value of 1. You will be working with a subset of the available <code>state</code>s, which should include the 88 counties of Ohio, plus counties from 3-5 other states you will select.<br>
</li>
<li>Make some transformations to obtain categorical versions (factors) of two of your selected variables and add them to your <strong>chr_2021</strong> tibble. Retain the original versions of those two variables, too, so that you wind up with 11 variables in total.</li>
<li>Your final <strong>chr_2021</strong> tibble will therefore contain 200-400 rows (counties) and 11 variables. Eventually, you’ll save this tibble as an R data frame.</li>
</ol>
</section>
<section id="data-development-task-list" class="level1">
<h1>Data Development Task List</h1>
<p>Here are some of the necessary details for each step of this process. Please refer to Dr.&nbsp;Love’s materials in the Project A Examples and Tips section for more help.</p>
<section id="task-a.-ingest-the-chr-data-into-a-tibble" class="level2">
<h2 class="anchored" data-anchor-id="task-a.-ingest-the-chr-data-into-a-tibble">Task A. <strong>Ingest the CHR Data into a tibble</strong></h2>
<ol type="1">
<li>Remove the first row of the available <code>.csv</code> file to leave the second row as the top row before ingesting the data into R. You could do this in Excel or perhaps Google Sheets, and then resave a new version of the file without this top row as a .csv before ingesting into R. A cleaner approach would be to remove this row in R when ingesting the data, by using the <code>skip = 1</code> command within your <code>read_csv()</code> as shown below.</li>
</ol>
<pre><code>data_url &lt;- "https://www.countyhealthrankings.org/sites/default/files/media/document/analytic_data2021.csv"
chr_2021_raw &lt;- read_csv(data_url, skip = 1)</code></pre>
<ol start="2" type="1">
<li>Read the resulting <code>.csv</code> file into R, and call the resulting tibble <strong>chr_2021_raw</strong>. Be sure that this goes as smoothly as possible. You should at this point have 3194 rows and 690 columns. At this stage, you may also want to restrict the data set to only include the 3081 rows which have “county_ranked” values of 1, since the other rows will not be used by us in this project.</li>
</ol>
</section>
<section id="task-b.-identify-a-set-of-4-6-states-containing-200-400-counties." class="level2">
<h2 class="anchored" data-anchor-id="task-b.-identify-a-set-of-4-6-states-containing-200-400-counties.">Task B. <strong>Identify a set of 4-6 states, containing 200-400 counties.</strong></h2>
<p>Your selection must include:</p>
<ul>
<li>the 88 counties of Ohio, and</li>
<li>all of the counties in a subset of 3-5 additional states in the US</li>
</ul>
<p>The number of counties (which have <code>county_ranked</code> values of 1) associated with each state (specified using its two-letter postal abbreviation code) is listed below, for your convenience.</p>
<ul>
<li>Do not include any state (including the District of Columbia, Connecticut, Delaware, Hawaii, New Hampshire and Rhode Island) with fewer than 12 counties. Those entities are shown in red below.</li>
<li>Note that the original version of this image described the 2020 data, which were a little different in the counts of ranked counties for ID, ND, NE, NV, OR and TX.</li>
</ul>
<p><img src="county_counts.PNG" class="img-fluid"></p>
<p>So, including <code>OH</code>, you will need a total of 200-400 counties, from 4-6 states. For example,</p>
<ul>
<li>one possible combination would be the states of <code>TX</code> (243 counties), <code>AZ</code> (15 counties) and <code>NM</code> (32 counties) in addition to <code>OH</code> (88 counties), which would yield 378 counties in 4 states</li>
<li>another combination would be the states of <code>WA</code> (39 counties), <code>WI</code> (72 counties), <code>WV</code> (55 counties) and <code>WY</code> (23 counties) to join <code>OH</code> (88 counties) yielding 277 counties in 5 states</li>
<li>and yet another would be <code>PA</code> (67), <code>NY</code> (62), <code>NJ</code> (21), <code>MD</code> (24) and <code>VA</code> (133) in addition to <code>OH</code> (88) yielding 395 counties in 6 states</li>
</ul>
<section id="notes" class="level3">
<h3 class="anchored" data-anchor-id="notes">Notes</h3>
<ol type="1">
<li>Choose your subset of states with the knowledge in mind that some variables in the CHR data are not available for some counties, and that each state you select must have more than 12 counties.</li>
<li>You should have some reason for selecting the states that you do, and you will need to describe that reason in a complete sentence or two in your proposal and your final report.</li>
<li>Since we’ve studied five Midwest states (and 437 counties) in Lab 2, we want you to look at a minimum of one state not included in that list, so your final selection of states (besides Ohio) must include at least one state other than Indiana, Illinois, Michigan and Wisconsin.</li>
<li>Don’t forget to filter the rows of the tibble so that only those rows with <code>county_ranked</code> of 1 are included. Otherwise, your counts won’t match the image above.</li>
</ol>
</section>
</section>
<section id="task-c.-identify-your-variables" class="level2">
<h2 class="anchored" data-anchor-id="task-c.-identify-your-variables">Task C. <strong>Identify Your Variables</strong></h2>
<p>Here you will need to identify variables from the data for your selected sample of counties that will allow you to create a tibble that includes:</p>
<ul>
<li>the five-digit fips code for the county, which will be a convenient ID variable</li>
<li>the name of the county, which will be useful for labeling and identifying the counties</li>
<li>the <code>state</code>, which will be a multi-categorical (with 4-6 categories) variable</li>
<li>the <code>county_ranked</code> variable, which tells us whether the row should be included in our data (so you’ll want to eventually filter down to the rows where <code>county_ranked == 1</code>)</li>
<li>and a total of five variables selected from the 79 variables in the CHR data set that are listed as <code>vXXX_rawvalue</code> (note: to select the entire group of 79 variables, you might try <code>select(ends_with("rawvalue"))</code> as part of a pipe of the data.)</li>
</ul>
<p>Your code to look at all 79 variables, plus the other required elements, might look something like this:</p>
<pre><code>chr_2021_raw2 &lt;- chr_2021_raw %&gt;% 
    select(fipscode, state, county, county_ranked, 
            ends_with("rawvalue"))</code></pre>
<p>Note that the resulting <code>chr_2021_raw2</code> tibble would have 3,194 rows and 83 columns, and you’d still need to reduce the number of variables (as described below), <strong>and</strong> filter down to the rows with <code>county_ranked</code> equal to 1.)</p>
<section id="the-79-variables-you-must-select-5-from" class="level3">
<h3 class="anchored" data-anchor-id="the-79-variables-you-must-select-5-from">The 79 variables you must select 5 from</h3>
<p>The <a href="https://www.countyhealthrankings.org/sites/default/files/media/document/2021%20Analytic%20Documentation.pdf">2021 CHR Analytic Data Documentation</a> file (PDF), and <a href="https://www.countyhealthrankings.org/sites/default/files/media/document/DataDictionary_2021.pdf">2021 Data Dictionary</a> PDF files are crucial here, as those are the ones that explain what the available variables mean, and how they should be labeled.</p>
<p>You must select your five variables from these 79 variables in the raw (.csv) data file. We show them here in the order in which they appear in the raw file. The listing “v001” in this table actually refers to the variable named “<strong>v001_rawvalue</strong>”.</p>
<p>“v001”, “v002”, “v036”, “v042”, “v037”, “v009”, “v011”, “v133”, “v070”, “v132”, “v049”, “v134”, “v045”, “v014”, “v085”, “v004”, “v088”, “v062”, “v005”, “v050”, “v155”, “v168”, “v069”, “v023”, “v024”, “v044”, “v082”, “v140”, “v043”, “v135”, “v125”, “v124”, “v136”, “v067”, “v137”, “v147”, “v127”, “v128”, “v129”, “v144”, “v145”, “v060”, “v061”, “v139”, “v083”, “v138”, “v039”, “v143”, “v003”, “v122”, “v131”, “v021”, “v149”, “v159”, “v160”, “v063”, “v065”, “v141”, “v142”, “v015”, “v161”, “v148”, “v158”, “v156”, “v153”, “v154”, “v166”, “v051”, “v052”, “v053”, “v054”, “v055”, “v081”, “v080”, “v056”, “v126”, “v059”, “v057”, “v058”</p>
<p>For example, <code>v001_rawvalue</code> shows the raw values for the premature death measure. If you select this variable, it is up to you to use the documentation in the two PDF files I have linked to, as well as the information on the County Health Rankings website, to get a reasonable understanding of what the variable measures, and how it was collected.</p>
</section>
<section id="some-important-notes" class="level3">
<h3 class="anchored" data-anchor-id="some-important-notes">Some important notes</h3>
<ol type="1">
<li><p>Be sure to read this entire Data page (especially the material on Cleaning Your Variables) before selecting your variables, so you are aware of some features of the data we disclose below.</p></li>
<li><p>The five variables you select must be five different variables selected from the 79 variables in the CHR data set that are listed as <code>vXXX_rawvalue</code>. Some of the variables in that set of 79 are better choices than others, based on the criteria in the next few notes.</p></li>
<li><p>Each of the variables you select should be of some actual interest to you on its own, in terms of either providing a health outcome of interest, or potentially providing useful information about a feature of the county that might relate to that health outcome. Your five selected quantitative variables, selected by you from the 79 available “raw value” CHR variables, will need be treated as follows:</p></li>
</ol>
<ul>
<li>variable 1 will be treated as quantitative, and as an outcome of interest</li>
<li>two others (variables 2 and 3) will also be treated as quantitative predictors of interest for variable 1</li>
<li>variable 4 will be categorized into 2 mutually exclusive and collectively exhaustive levels to create a binary categorical variable of interest in predicting variable 1 (this is a terrible idea in practical work.)
<ul>
<li>Note that exactly one of the variables in the data (<code>v124</code> about drinking water violations) is already a binary (1 = Yes, 0 = No) variable (all other variables are quantitative.) You are permitted to use <code>v124</code> as your variable 4, if you like. <code>v124</code> may not be used as anything other than variable 4 in your work.</li>
</ul></li>
<li>variable 5 will be categorized into 3-5 mutually exclusive and collectively exhaustive levels to create a multi-categorical variable of interest in predicting variable 1 (this is almost as bad as what we’ll do to variable 4 in practical work)</li>
<li>the <code>state</code> will serve as another multi-categorical (with 4-6 categories) predictor of variable 1, so this will also be part of your tibble</li>
</ul>
<ol start="4" type="1">
<li>Each of the five variables you select must have data for at least 75% of the counties in each state you plan to study. This is something you will have to check on, in R, and you’ll have to present the code, and demonstrate with complete English sentences that you’ve verified this to be true for each of your five selections. The variables listed below are those with more than 10% missing values across all ranked counties. While you are welcome to use any of these variables, you may want to look elsewhere to avoid problems with the “minimum 75% complete data” requirement.</li>
</ol>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Variable</th>
<th style="text-align: center;">Description</th>
<th style="text-align: center;">% missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code>v129_rawvalue</code></td>
<td style="text-align: center;">infant mortality</td>
<td style="text-align: center;">60.1</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>v015_rawvalue</code></td>
<td style="text-align: center;">homicides</td>
<td style="text-align: center;">57.8</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>v149_rawvalue</code></td>
<td style="text-align: center;">disconnected youth</td>
<td style="text-align: center;">57.6</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>v138_rawvalue</code></td>
<td style="text-align: center;">drug overdose deaths</td>
<td style="text-align: center;">43.6</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>v158_rawvalue</code></td>
<td style="text-align: center;">juvenile arrests</td>
<td style="text-align: center;">41.9</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>v128_rawvalue</code></td>
<td style="text-align: center;">child mortality</td>
<td style="text-align: center;">38.8</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>v141_rawvalue</code></td>
<td style="text-align: center;">residential segregation</td>
<td style="text-align: center;">32.2</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>v148_rawvalue</code></td>
<td style="text-align: center;">firearm fatalities</td>
<td style="text-align: center;">27.3</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>v061_rawvalue</code></td>
<td style="text-align: center;">HIV prevalence</td>
<td style="text-align: center;">22.5</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>v161_rawvalue</code></td>
<td style="text-align: center;">suicides</td>
<td style="text-align: center;">22.2</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>v021_rawvalue</code></td>
<td style="text-align: center;">High School graduation</td>
<td style="text-align: center;">16.1</td>
</tr>
<tr class="even">
<td style="text-align: center;"><code>v160_rawvalue</code></td>
<td style="text-align: center;">Math scores</td>
<td style="text-align: center;">12.8</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code>v039_rawvalue</code></td>
<td style="text-align: center;">Motor vehicle crash deaths</td>
<td style="text-align: center;">12.7</td>
</tr>
</tbody>
</table>
<ol start="5" type="1">
<li><p>Note that the descriptions in the table above (and in the tables below) associated with each variable are available as the first (deleted) row in the .csv file, and are also specified in the <a href="https://www.countyhealthrankings.org/sites/default/files/media/document/2021%20Analytic%20Documentation.pdf">2021 CHR Analytic Data Documentation</a> file.</p></li>
<li><p>Across your complete set of 4-6 selected states, the raw versions of each of your five selected variables must have at least 10 distinct non-missing values. Again, you’ll need to show R code to do this checking, and demonstrate with complete English sentences that you have checked this to be true.</p></li>
</ol>
</section>
</section>
<section id="cleaning-your-variables" class="level2">
<h2 class="anchored" data-anchor-id="cleaning-your-variables">Cleaning Your Variables</h2>
<p>Check your five variables on the lists below. You should find all five of your selected variables on the list somewhere.</p>
<ul>
<li>If you plan to use the variable as quantitative, do what is suggested below as part of your data development work, and use that version in your codebook.</li>
<li>If you plan to use the variable as a categorical predictor, we still suggest you make the appropriate change to the original quantitative version as indicated below.</li>
</ul>
<section id="the-binary-category" class="level3">
<h3 class="anchored" data-anchor-id="the-binary-category">The Binary Category</h3>
<p><code>v124</code> is about Drinking Water Violations, is the only binary (1 = Yes, 0 = No) variable in the data. (all other variables are quantitative.) You are permitted to use <code>v124</code> as your variable 4, if you like. <code>v124</code> may not be used as anything other than variable 4 in your work.</p>
</section>
<section id="ratios-that-need-converting" class="level3">
<h3 class="anchored" data-anchor-id="ratios-that-need-converting">Ratios That Need Converting</h3>
<p>These variables are specified as providers per population in the raw data file. You will want to take the reciprocal (1/raw value) to rescale the results in terms of population per provider, which should be much more interpretable.</p>
<ul>
<li>You’ll note that this rescaled ratio is also provided in the raw file if you want it, for example, for primary care physicians, <code>v004_rawvalue</code> is providers per population, but <code>v004_other_data_1</code> is the ratio of population (residents) per provider.</li>
<li>Note that after rescaling by taking the reciprocal, you may see some counties with infinite ratios, which should then be changed to missing values.</li>
</ul>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: right;">Code</th>
<th style="text-align: left;">Variable Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">v004</td>
<td style="text-align: left;">Primary care physicians</td>
</tr>
<tr class="even">
<td style="text-align: right;">v062</td>
<td style="text-align: left;">Mental health providers</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v088</td>
<td style="text-align: left;">Dentists</td>
</tr>
<tr class="even">
<td style="text-align: right;">v131</td>
<td style="text-align: left;">Other primary care providers (not recommended)</td>
</tr>
</tbody>
</table>
<ul>
<li>We don’t recommend using variable <code>v131</code> in Project A because of the large number of counties with very small numbers of these providers listed.</li>
</ul>
</section>
<section id="variables-that-should-be-rescaled" class="level3">
<h3 class="anchored" data-anchor-id="variables-that-should-be-rescaled">Variables that should be rescaled</h3>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 37%">
<col style="width: 50%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Code</th>
<th style="text-align: left;">Variable Description</th>
<th style="text-align: left;">What to do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">v001</td>
<td style="text-align: left;">Premature death</td>
<td style="text-align: left;">Divide by 100 to represent losses per 1000 population</td>
</tr>
<tr class="even">
<td style="text-align: right;">v051</td>
<td style="text-align: left;">Population</td>
<td style="text-align: left;">Either use log10(population), or divide population by 1000 to represent population in thousands.</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v061</td>
<td style="text-align: left;">HIV prevalence</td>
<td style="text-align: left;">Divide by 100 to represent cases per 1000 population (caution: substantial missing data)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v063</td>
<td style="text-align: left;">Median household income</td>
<td style="text-align: left;">Divide by 1000 to represent in thousands of dollars</td>
</tr>
</tbody>
</table>
</section>
<section id="variables-that-are-proportions-should-be-converted-to-percentages" class="level3">
<h3 class="anchored" data-anchor-id="variables-that-are-proportions-should-be-converted-to-percentages">Variables that are Proportions should be converted to Percentages</h3>
<p>Each of the variables listed below are proportions (between 0 and 1). Before you use them in any analyses, please <strong>multiply them by 100</strong> in your data development (using mutate) to turn their values into percentages (between 0 and 100) and this will seriously ease the interpretation of slopes and transformations for these variables.</p>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 91%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Code</th>
<th style="text-align: left;">Variable Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">v002</td>
<td style="text-align: left;">Poor or fair health</td>
</tr>
<tr class="even">
<td style="text-align: right;">v003</td>
<td style="text-align: left;">Uninsured adults (pick v003 or v085, but not both)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v009</td>
<td style="text-align: left;">Adult smoking</td>
</tr>
<tr class="even">
<td style="text-align: right;">v011</td>
<td style="text-align: left;">Adult obesity</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v021</td>
<td style="text-align: left;">High school graduation (pick v021 or v168, but not both, see note)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v023</td>
<td style="text-align: left;">Unemployment</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v024</td>
<td style="text-align: left;">Children in poverty</td>
</tr>
<tr class="even">
<td style="text-align: right;">v037</td>
<td style="text-align: left;">Low birthweight</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v049</td>
<td style="text-align: left;">Excessive drinking</td>
</tr>
<tr class="even">
<td style="text-align: right;">v050</td>
<td style="text-align: left;">Mammography screening</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v052</td>
<td style="text-align: left;">Proportion below 18 years of age</td>
</tr>
<tr class="even">
<td style="text-align: right;">v053</td>
<td style="text-align: left;">Proportion 65 and older</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v054</td>
<td style="text-align: left;">Proportion Non-Hispanic Black (see note below)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v055</td>
<td style="text-align: left;">Proportion American Indian and Alaska Native (see note below)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v056</td>
<td style="text-align: left;">Proportion Hispanic (see note below)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v057</td>
<td style="text-align: left;">Proportion Females</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v058</td>
<td style="text-align: left;">Proportion Rural</td>
</tr>
<tr class="even">
<td style="text-align: right;">v059</td>
<td style="text-align: left;">Proportion not proficient in English</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v060</td>
<td style="text-align: left;">Diabetes prevalence</td>
</tr>
<tr class="even">
<td style="text-align: right;">v065</td>
<td style="text-align: left;">Children eligible for free or reduced price lunch</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v067</td>
<td style="text-align: left;">Driving alone to work</td>
</tr>
<tr class="even">
<td style="text-align: right;">v069</td>
<td style="text-align: left;">Some college</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v070</td>
<td style="text-align: left;">Physical inactivity</td>
</tr>
<tr class="even">
<td style="text-align: right;">v080</td>
<td style="text-align: left;">Proportion Native Hawaiian/Other Pacific Islander (see note below)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v081</td>
<td style="text-align: left;">Proportion Asian (see note below)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v082</td>
<td style="text-align: left;">Children in single-parent households</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v083</td>
<td style="text-align: left;">Limited access to healthy foods</td>
</tr>
<tr class="even">
<td style="text-align: right;">v085</td>
<td style="text-align: left;">Uninsured (pick v003 or v085, but not both)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v122</td>
<td style="text-align: left;">Uninsured children (pick v085 or v122, but not both)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v126</td>
<td style="text-align: left;">Proportion Non-Hispanic White (see note below)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v132</td>
<td style="text-align: left;">Access to exercise opportunities</td>
</tr>
<tr class="even">
<td style="text-align: right;">v134</td>
<td style="text-align: left;">Proportion of driving deaths with alcohol involvement</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v136</td>
<td style="text-align: left;">Severe housing problems</td>
</tr>
<tr class="even">
<td style="text-align: right;">v137</td>
<td style="text-align: left;">Long commute - driving alone</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v139</td>
<td style="text-align: left;">Food insecurity</td>
</tr>
<tr class="even">
<td style="text-align: right;">v143</td>
<td style="text-align: left;">Insufficient sleep</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v144</td>
<td style="text-align: left;">Frequent physical distress (pick v036 or v144, but not both)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v145</td>
<td style="text-align: left;">Frequent mental distress (pick v042 or v145, but not both)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v149</td>
<td style="text-align: left;">Disconnected youth (caution: lots of missing data)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v153</td>
<td style="text-align: left;">Homeownership</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v154</td>
<td style="text-align: left;">Severe housing cost burden</td>
</tr>
<tr class="even">
<td style="text-align: right;">v155</td>
<td style="text-align: left;">Flu vaccinations</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v166</td>
<td style="text-align: left;">Broadband access</td>
</tr>
<tr class="even">
<td style="text-align: right;">v168</td>
<td style="text-align: left;">High school completion (pick v021 or v168, but not both, see note)</td>
</tr>
</tbody>
</table>
<ul>
<li>If you are interested in studying race and ethnicity and their impact on a health outcome, these data aren’t particularly well suited to a detailed look. Instead we suggest using <code>v126</code> to incorporate this dimension as a predictor (or its inverse, 1 - <code>v126</code>), rather than including any of the other race/ethnicity variables, specifically <code>v053</code>, <code>v054</code>, <code>v055</code>, <code>v056</code>, <code>v080</code>, or <code>v081</code>. This is because there’s more variation in the <code>v126</code> data across the reported counties. Again, a serious look at the impact of race/ethnicity is beyond the scope of Project A.</li>
<li>Note that variable <code>v021</code> has more missing data than <code>v168</code>, should you be trying to choose between them.</li>
</ul>
</section>
<section id="variables-that-should-be-ok-as-is" class="level3">
<h3 class="anchored" data-anchor-id="variables-that-should-be-ok-as-is">Variables that should be OK as is</h3>
<p>The variables listed below should be fine as they are. Most of them are ratios, although a few are averages or indexes. The main issue for these variables is correctly specifying the units of measurement (note that the indexes don’t have units.)</p>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 92%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Code</th>
<th style="text-align: left;">Variable Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">v005</td>
<td style="text-align: left;">Preventable hospital stays</td>
</tr>
<tr class="even">
<td style="text-align: right;">v014</td>
<td style="text-align: left;">Teen births</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v015</td>
<td style="text-align: left;">Homicide rate (caution: lots of missing data)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v036</td>
<td style="text-align: left;">Poor physical health days (pick v036 or v144, but not both)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v039</td>
<td style="text-align: left;">Motor vehicle crash deaths (caution: substantial missing data)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v042</td>
<td style="text-align: left;">Poor mental health days (pick v042 or v145, but not both)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v043</td>
<td style="text-align: left;">Violent crime</td>
</tr>
<tr class="even">
<td style="text-align: right;">v044</td>
<td style="text-align: left;">Income inequality</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v045</td>
<td style="text-align: left;">Sexually transmitted infections</td>
</tr>
<tr class="even">
<td style="text-align: right;">v125</td>
<td style="text-align: left;">Air pollution - particulate matter</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v127</td>
<td style="text-align: left;">Premature age-adjusted mortality</td>
</tr>
<tr class="even">
<td style="text-align: right;">v128</td>
<td style="text-align: left;">Child mortality (caution: lots of missing data)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v129</td>
<td style="text-align: left;">Infant mortality (caution: lots of missing data)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v133</td>
<td style="text-align: left;">Food environment index</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v135</td>
<td style="text-align: left;">Injury deaths</td>
</tr>
<tr class="even">
<td style="text-align: right;">v138</td>
<td style="text-align: left;">Drug overdose deaths (caution: lots of missing data)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v140</td>
<td style="text-align: left;">Social associations</td>
</tr>
<tr class="even">
<td style="text-align: right;">v141</td>
<td style="text-align: left;">Residential segregation - Black/White (pick v141 or v142, see note)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v142</td>
<td style="text-align: left;">Residential segregation - non-White/White (pick v141 or v142, see note)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v147</td>
<td style="text-align: left;">Life expectancy</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v148</td>
<td style="text-align: left;">Firearm fatalities (caution: substantial missing data)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v156</td>
<td style="text-align: left;">Traffic volume</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v158</td>
<td style="text-align: left;">Juvenile arrests (caution: lots of missing data)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v159</td>
<td style="text-align: left;">Reading scores</td>
</tr>
<tr class="odd">
<td style="text-align: right;">v160</td>
<td style="text-align: left;">Math scores (caution: substantial missing data)</td>
</tr>
<tr class="even">
<td style="text-align: right;">v161</td>
<td style="text-align: left;">Suicides (caution: substantial missing data)</td>
</tr>
</tbody>
</table>
<ul>
<li>Note that variable <code>v141</code> has more missing data than <code>v142</code>, should you be trying to choose between them.</li>
</ul>
</section>
</section>
<section id="task-d.-create-categorical-variables" class="level2">
<h2 class="anchored" data-anchor-id="task-d.-create-categorical-variables">Task D. <strong>Create Categorical Variables</strong></h2>
<p>As mentioned, you will need to provide code to categorize two of your variables. Specifically…</p>
<ul>
<li>variable 4 will be categorized into 2 mutually exclusive and collectively exhaustive levels to create a binary categorical variable of interest in predicting variable 1 (this is a terrible idea in practical work.)</li>
<li>variable 5 will be categorized into 3-5 mutually exclusive and collectively exhaustive levels to create a multi-categorical variable of interest in predicting variable 1 (this is almost as bad as what we’ll do to variable 4 in practical work.)</li>
</ul>
<section id="notes-1" class="level3">
<h3 class="anchored" data-anchor-id="notes-1">Notes</h3>
<ol type="1">
<li>You will need to verify that all levels (categories) in each of your categorical variables contain at least 10 counties. Using <code>tabyl</code> is a good approach to check that this is true.</li>
</ol>
</section>
</section>
<section id="task-e.-create-your-main-tibble" class="level2">
<h2 class="anchored" data-anchor-id="task-e.-create-your-main-tibble">Task E. <strong>Create your Main Tibble</strong></h2>
<p>In your R Markdown file, you will need to present all code necessary to take the original .csv data file and wind up with your <code>chr_2021</code> tibble so that we can run that code and get the same results you do.</p>
<p>Your main data set for analysis then should be gathered into a tibble called <strong>chr_2021</strong> containing the following information:</p>
<ul>
<li>the identifying variables for each county, specifically:
<ul>
<li><code>fipscode</code> = the five-digit fips code for the state and county,</li>
<li><code>county</code> = the name of the county</li>
<li><code>state</code> = the postal abbreviation code for the state</li>
</ul></li>
<li>your three selected quantitative variables, one of whom is your outcome</li>
<li>your binary categorical variable derived from your fourth selected variable</li>
<li>your multi-categorical variable derived from your fifth selected variable</li>
<li>the “original” quantitative versions of the two variables (4 and 5) that you later categorized (if you chose the drinking water violations variable for variable 4, then you don’t need to repeat it here.)</li>
</ul>
<p>All of these variables should be renamed (and also have clean_names applied) so as to have descriptive and maximally helpful variable names.</p>
<ul>
<li>For example, if you have decided to use as a quantitative variable something like <code>v009_rawvalue</code>, which is about adult smoking, you should rename the variable <code>v009_rawvalue</code> to <strong>adult_smoking</strong> in your tibble.</li>
<li>If <code>v009_rawvalue</code> (about adult smoking) is to be one of your categorical variables, then you should include both the original quantitative value (renamed <code>adult_smoking_raw</code>) and your categorical variable that you’ll actually use in analyses, which should be named <code>adult_smoking_cat</code>.</li>
</ul>
<section id="notes-2" class="level3">
<h3 class="anchored" data-anchor-id="notes-2">Notes</h3>
<ol type="1">
<li>After your cleaning is done, each row in your <code>chr_2021</code> tibble should contain all of the counties within the 4-6 states you are studying, and no other counties should be included in your tibble. All rows of your <code>chr_2021</code> tibble should be taken from those rows in the original data with <code>county_ranked</code> values of 1.</li>
<li>If data for some counties are missing in the raw data for one or more of your variables, then these data should be indicated as missing (using NA) in the tibble.</li>
<li>There is no need to set a seed in this process, as you are not doing anything that involves selecting a random sample.</li>
</ol>
</section>
</section>
<section id="task-f.-provide-a-codebook-for-your-tibble" class="level2">
<h2 class="anchored" data-anchor-id="task-f.-provide-a-codebook-for-your-tibble">Task F. <strong>Provide a Codebook for Your Tibble</strong></h2>
<p>Next, you will provide a codebook as part of your R Markdown file (and HTML/PDF output) that specifies the name of each variable in your tibble and its definition. After you select your variables, use the <a href="https://www.countyhealthrankings.org/explore-health-rankings/measures-data-sources/2021-measures">County Health Rankings website’s 2021 Measures list</a>, and in particular the linked information on that page for full descriptions, definitions and limitations of the variables you have selected.</p>
<section id="notes-3" class="level3">
<h3 class="anchored" data-anchor-id="notes-3">Notes</h3>
<ol type="1">
<li><p>Be sure to include a description for each of the 10 variables (3 required + 5 you select + 2 categorical versions you create) in your final tibble, not just the ones that you wind up using in your analyses.</p></li>
<li><p>Include a description of what the cutpoints are for the two categorical variables you create, and specify how those cutpoints were chosen.</p></li>
</ol>
</section>
</section>
<section id="task-g.-saving-and-summarizing-your-tibble" class="level2">
<h2 class="anchored" data-anchor-id="task-g.-saving-and-summarizing-your-tibble">Task G. <strong>Saving and Summarizing Your Tibble</strong></h2>
<ol type="1">
<li><p><strong>Save the Tibble</strong>: You should provide code that saves your tibble as an R data set into your R Project, with the file name <strong>chr_2021_YOURNAME.Rds</strong>. If you like, you can store this <code>.Rds</code> file in a <code>data</code> subdirectory within your R Project.</p></li>
<li><p><strong>Print the Tibble</strong>: You will then prove that your tibble is in fact a tibble and not just a data frame by listing it, so that the first 10 rows are printed, and the columns are appropriately labeled.</p></li>
<li><p><strong>Numerical Summaries</strong>: You will then demonstrate main numerical summaries from the tibble by running the following summaries.</p></li>
</ol>
<ul>
<li><code>Hmisc::describe</code> on the whole tibble (all 10 variables: which is what you’ll do for the proposal in Lab 04).</li>
<li>In the project report, there are two additional requirements.
<ul>
<li><code>mosaic::favstats</code> on each of your quantitative variables (so variables 1, 2, and 3 and the original versions of variables 4 and 5)</li>
<li><code>janitor::tabyl</code> on your categorical variables 4 and 5 as well as on <code>state</code>.</li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>